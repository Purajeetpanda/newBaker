from pathlib import Path

html = r"""
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Minimal, Honest Sourdough — Self‑Healing Images</title>
  <meta name="description" content="From-scratch sourdough guide with images that auto-generate a fresh loaf illustration if any picture is unavailable." />
  <style>
    :root {
      --bg: #0b0f14; --card:#121821; --ink:#e8eef5; --muted:#9fb1c2; --line:#1d2836;
      --accent:#4ce3b8; --shadow: 0 8px 40px rgba(0,0,0,.35);
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background:
        radial-gradient(1200px 600px at 20% -10%, rgba(76,227,184,.08), transparent 60%),
        radial-gradient(1400px 800px at 120% -20%, rgba(156,240,215,.06), transparent 60%),
        #0b0f14;
      color: var(--ink);
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    a { color: #9cf0d7; text-decoration: none; }
    a:hover { text-decoration: underline; }
    header {
      position: sticky; top: 0; z-index: 10;
      backdrop-filter: blur(8px) saturate(120%);
      background: rgba(9,12,18,.65);
      border-bottom: 1px solid var(--line);
    }
    .container { max-width: 1100px; margin: 0 auto; padding: clamp(16px, 2vw, 28px); }
    .hero { display:grid; grid-template-columns: 1.15fr .85fr; gap: clamp(16px,2.5vw,28px); align-items:center; }
    @media (max-width: 980px){ .hero{ grid-template-columns: 1fr; } }
    .card { background: var(--card); border:1px solid var(--line); border-radius:18px; padding: clamp(14px, 1.8vw, 22px); box-shadow: var(--shadow); }
    .hero-img { position: relative; border-radius: 18px; overflow: hidden; border:1px solid var(--line); aspect-ratio: 4/3; }
    .hero-img img { width:100%; height:100%; object-fit:cover; display:block; }
    h1 { font-size: clamp(1.6rem, 2.6vw + 1rem, 2.6rem); margin:.4rem 0 .2rem; }
    .lead { color: var(--muted); }
    .gallery { display:grid; gap:12px; grid-template-columns: repeat(3,minmax(0,1fr)); }
    @media (max-width: 980px){ .gallery { grid-template-columns: 1fr; } }
    figure { margin:0; border-radius:14px; overflow:hidden; border:1px solid var(--line); aspect-ratio:1/1; position:relative; }
    figure img { width:100%; height:100%; object-fit:cover; display:block; }
    .btn-regenerate {
      position:absolute; right:8px; bottom:8px; border:1px solid #244;
      background: rgba(0,0,0,.45); color:#cfe; border-radius:999px; padding:6px 10px; font-size:.85rem;
      cursor:pointer;
    }
    .table-wrap { overflow:auto; border-radius:14px; border:1px solid var(--line); }
    table { width:100%; border-collapse:collapse; min-width:520px; }
    th, td { border-bottom:1px solid var(--line); padding:12px 14px; text-align:left; }
    th { background:#0f1620; position:sticky; top:0; }
    .kbd { background:#0f1720; border:1px solid #1e2b3c; padding:2px 6px; border-radius:6px; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }
    .note { color:var(--muted); }
    .footer { color:var(--muted); padding: 30px 0 70px; }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <strong>Minimal, Honest Sourdough</strong> — from scratch · no commercial yeast · images that self-heal
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <div>
        <h1>Most Delicious Sourdough at Home</h1>
        <p class="lead">Utensil specifics (Dutch-oven lid timing), oven modes (conventional vs fan‑forced), starter storage & aromas — with images that replace themselves by <em>generating</em> a fresh sourdough illustration if any picture breaks.</p>
      </div>
      <figure class="hero-img">
        <img class="watch" alt="Crusty rustic sourdough loaf on wooden board"
             src="https://images.unsplash.com/photo-1600326145359-9bb9282b3d48?q=80&w=1600&auto=format&fit=crop" referrerpolicy="no-referrer">
        <button class="btn-regenerate" aria-label="Regenerate hero image" data-target="prev">Regenerate</button>
      </figure>
    </section>

    <section class="card" style="margin-top:18px;">
      <h2>Quick Specs</h2>
      <div class="table-wrap">
        <table>
          <thead><tr><th>Field</th><th>Details</th></tr></thead>
          <tbody>
            <tr><th>Ingredients</th><td>Flour + Water + Salt</td></tr>
            <tr><th>Fermentation</th><td>Bulk 3–6 h (23–26 °C) · Cold proof 8–16 h (3–5 °C)</td></tr>
            <tr><th>Bake</th><td>Preheat 250 °C · <span class="kbd">20 min lid‑on</span>, then <span class="kbd">20–25 min lid‑off</span> @ 230 °C</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <section class="card" style="margin-top:18px;">
      <h2>Rustic Gallery</h2>
      <div class="gallery">
        <figure>
          <img class="watch" alt="Decorative scoring"
               src="https://images.unsplash.com/photo-1589367920969-ab8e050bbb04?q=80&w=800&auto=format&fit=crop" referrerpolicy="no-referrer">
          <button class="btn-regenerate" aria-label="Regenerate image" data-target="prev">Regenerate</button>
        </figure>
        <figure>
          <img class="watch" alt="Loaf cooling on rack"
               src="https://images.unsplash.com/photo-1514516870926-2059896c1c78?q=80&w=800&auto=format&fit=crop" referrerpolicy="no-referrer">
          <button class="btn-regenerate" aria-label="Regenerate image" data-target="prev">Regenerate</button>
        </figure>
        <figure>
          <img class="watch" alt="Rustic crumb close-up"
               src="https://images.unsplash.com/photo-1549931319-a545dcf3bc73?q=80&w=800&auto=format&fit=crop" referrerpolicy="no-referrer">
          <button class="btn-regenerate" aria-label="Regenerate image" data-target="prev">Regenerate</button>
        </figure>
      </div>
      <p class="note">Tip: Click “Regenerate” to draw a brand‑new sourdough if an image looks off or fails to load.</p>
    </section>

    <section class="footer">
      <p>© 2025 · Natural fermentation only; no commercial yeast or added cultures.</p>
    </section>
  </main>

  <script>
    // --- Minimal seeded RNG (xorshift32) for reproducible variety ---
    function RNG(seed){ let x = seed >>> 0; return function(){ x ^= x << 13; x ^= x >>> 17; x ^= x << 5; return (x >>> 0) / 4294967296; }; }

    // --- Painter: procedurally "bakes" a sourdough illustration on a canvas ---
    function generateSourdoughPNG(w=1200, h=900, seed=Date.now()){
      const rnd = RNG(seed);
      const c = document.createElement('canvas'); c.width = w; c.height = h;
      const ctx = c.getContext('2d');

      // background
      const g = ctx.createLinearGradient(0,0,0,h);
      g.addColorStop(0, '#0b0f14'); g.addColorStop(1, '#12202c');
      ctx.fillStyle = g; ctx.fillRect(0,0,w,h);

      // board
      const boardH = Math.floor(h*0.18);
      const boardY = h - boardH - 30;
      const boardGrad = ctx.createLinearGradient(0,boardY,0,h);
      boardGrad.addColorStop(0,'#3a2a1f'); boardGrad.addColorStop(1,'#22170f');
      ctx.fillStyle = boardGrad;
      ctx.fillRect(0, boardY, w, h-boardY);
      // wood lines
      ctx.globalAlpha = 0.25;
      for(let i=0;i<12;i++){ ctx.fillRect(0, boardY + i*(boardH/12), w, 1); }
      ctx.globalAlpha = 1;

      // loaf base ellipse
      const cx = w*0.52, cy = boardY - h*0.05;
      const rx = w*0.28*(0.9 + 0.2*rnd()); const ry = h*0.18*(0.9 + 0.2*rnd());
      const crust = ctx.createRadialGradient(cx-rx*0.2, cy-ry*0.2, rx*0.2, cx, cy, rx*1.1);
      crust.addColorStop(0, '#f9d6a5');       // flour-dusted highlight
      crust.addColorStop(0.55, '#c68642');    // golden brown
      crust.addColorStop(0.9, '#7a4a1d');     // deep crust
      ctx.fillStyle = crust;
      ctx.beginPath();
      ctx.ellipse(cx, cy, rx, ry, 0, 0, Math.PI*2);
      ctx.fill();

      // ear / scoring slash
      const slashes = 1 + Math.floor(rnd()*3);
      for(let s=0;s<slashes;s++){
        const ox = (s-0.5)*(rx*0.35);
        ctx.save();
        ctx.translate(cx + ox, cy - ry*0.15);
        ctx.rotate((rnd()*0.3 - 0.15));
        ctx.strokeStyle = 'rgba(255,240,210,0.9)';
        ctx.lineWidth = Math.max(2, rx*0.05);
        ctx.beginPath();
        ctx.moveTo(-rx*0.35, 0);
        ctx.quadraticCurveTo(0, -ry*0.25, rx*0.35, 0);
        ctx.stroke();
        ctx.restore();
      }

      // blister & texture speckles
      const dots = 900 + Math.floor(rnd()*600);
      for(let i=0;i<dots;i++){
        const ang = rnd()*Math.PI*2;
        const r = Math.pow(rnd(),0.6);
        const px = cx + Math.cos(ang)*rx*r;
        const py = cy + Math.sin(ang)*ry*r*0.9;
        const size = 0.5 + rnd()*1.8;
        ctx.fillStyle = `rgba(255,230,190,${0.15 + rnd()*0.45})`;
        ctx.fillRect(px, py, size, size);
      }

      // steam wisps
      for(let s=0;s<3;s++){
        let x = cx - rx*0.2 + rnd()*rx*0.4;
        let y = cy - ry*1.1;
        ctx.strokeStyle = 'rgba(255,255,255,0.18)';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(x,y);
        for(let k=0;k<5;k++){ x += (rnd()-0.5)*40; y -= 40 + rnd()*20; ctx.quadraticCurveTo(x-10,y-10,x,y); }
        ctx.stroke();
      }

      // vignette
      const vg = ctx.createRadialGradient(w/2,h/2,Math.max(w,h)*0.2,w/2,h/2,Math.max(w,h)*0.75);
      vg.addColorStop(0,'rgba(0,0,0,0)'); vg.addColorStop(1,'rgba(0,0,0,0.5)');
      ctx.fillStyle = vg; ctx.fillRect(0,0,w,h);

      return c.toDataURL('image/png');
    }

    // Replace broken images with generated sourdough; also allow manual regeneration.
    function attachSelfHealing(img){
      function replace(){
        const rect = img.getBoundingClientRect();
        const w = Math.max(600, Math.floor(rect.width||1200));
        const h = Math.max(400, Math.floor(rect.height||900));
        img.src = generateSourdoughPNG(w, h, Math.floor(Math.random()*2**31));
      }
      img.addEventListener('error', replace, { once: true });
      // If resource is blocked (e.g., referrer), some browsers fire 'load' with empty image.
      // Add a safety timer to verify naturalWidth.
      img.addEventListener('load', function(){
        if(!img.naturalWidth || !img.naturalHeight){ replace(); }
      });
    }

    document.querySelectorAll('img.watch').forEach(attachSelfHealing);

    // Buttons to regenerate on demand
    document.querySelectorAll('.btn-regenerate').forEach(btn=>{
      btn.addEventListener('click', function(e){
        const target = btn.dataset.target === 'prev' ? btn.previousElementSibling : document.querySelector(btn.dataset.target);
        if(target && target.tagName === 'IMG'){
          const rect = target.getBoundingClientRect();
          target.src = generateSourdoughPNG(Math.max(600, rect.width||1200), Math.max(400, rect.height||900));
        }
      });
    });
  </script>
</body>
</html>
"""

out = Path("/mnt/data/sourdough-self-healing.html")
out.write_text(html, encoding="utf-8")
str(out)
